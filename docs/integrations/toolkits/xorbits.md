---
custom_edit_url: https://github.com/langchain-ai/langchain/edit/master/docs/docs/integrations/toolkits/xorbits.ipynb
---

# Xorbits

æœ¬ç¬”è®°æœ¬å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ä»£ç†ä¸[Xorbits Pandas](https://doc.xorbits.io/en/latest/reference/pandas/index.html)æ•°æ®æ¡†å’Œ[Xorbits Numpy](https://doc.xorbits.io/en/latest/reference/numpy/index.html)ndarrayè¿›è¡Œäº¤äº’ã€‚å®ƒä¸»è¦é’ˆå¯¹é—®ç­”è¿›è¡Œäº†ä¼˜åŒ–ã€‚

**æ³¨æ„ï¼šæ­¤ä»£ç†åœ¨åå°è°ƒç”¨`Python`ä»£ç†ï¼Œæ‰§è¡ŒLLMç”Ÿæˆçš„Pythonä»£ç  - å¦‚æœLLMç”Ÿæˆçš„Pythonä»£ç æœ‰å®³ï¼Œåˆ™å¯èƒ½ä¼šé€ æˆä¸è‰¯åæœã€‚è¯·è°¨æ…ä½¿ç”¨ã€‚**

## Pandas ç¤ºä¾‹


```python
import xorbits.pandas as pd
from langchain_experimental.agents.agent_toolkits import create_xorbits_agent
from langchain_openai import OpenAI
```


```python
data = pd.read_csv("titanic.csv")
agent = create_xorbits_agent(OpenAI(temperature=0), data, verbose=True)
```

```output
  0%|          |   0.00/100 [00:00<?, ?it/s]
```


```python
agent.run("æœ‰å¤šå°‘è¡Œå’Œåˆ—ï¼Ÿ")
```
```output


[1m> è¿›å…¥æ–°é“¾...[0m
[32;1m[1;3mæ€è€ƒï¼šæˆ‘éœ€è¦è®¡ç®—è¡Œå’Œåˆ—çš„æ•°é‡
åŠ¨ä½œï¼špython_repl_ast
åŠ¨ä½œè¾“å…¥ï¼šdata.shape[0m
è§‚å¯Ÿï¼š[36;1m[1;3m(891, 12)[0m
æ€è€ƒï¼š[32;1m[1;3mæˆ‘ç°åœ¨çŸ¥é“æœ€ç»ˆç­”æ¡ˆ
æœ€ç»ˆç­”æ¡ˆï¼šæœ‰891è¡Œå’Œ12åˆ—ã€‚[0m

[1m> å®Œæˆé“¾ã€‚[0m
```


```output
'æœ‰891è¡Œå’Œ12åˆ—ã€‚'
```



```python
agent.run("åœ¨pclass 1ä¸­æœ‰å¤šå°‘äººï¼Ÿ")
```
```output


[1m> è¿›å…¥æ–°é“¾...[0m
```
```output
  0%|          |   0.00/100 [00:00<?, ?it/s]
```
```output
[32;1m[1;3mæ€è€ƒï¼šæˆ‘éœ€è¦è®¡ç®—åœ¨pclass 1ä¸­çš„äººæ•°
åŠ¨ä½œï¼špython_repl_ast
åŠ¨ä½œè¾“å…¥ï¼šdata[data['Pclass'] == 1].shape[0][0m
è§‚å¯Ÿï¼š[36;1m[1;3m216[0m
æ€è€ƒï¼š[32;1m[1;3mæˆ‘ç°åœ¨çŸ¥é“æœ€ç»ˆç­”æ¡ˆ
æœ€ç»ˆç­”æ¡ˆï¼šåœ¨pclass 1ä¸­æœ‰216äººã€‚[0m

[1m> å®Œæˆé“¾ã€‚[0m
```


```output
'åœ¨pclass 1ä¸­æœ‰216äººã€‚'
```



```python
agent.run("å¹³å‡å¹´é¾„æ˜¯å¤šå°‘ï¼Ÿ")
```
```output


[1m> è¿›å…¥æ–°é“¾...[0m
[32;1m[1;3mæ€è€ƒï¼šæˆ‘éœ€è¦è®¡ç®—å¹³å‡å¹´é¾„
åŠ¨ä½œï¼špython_repl_ast
åŠ¨ä½œè¾“å…¥ï¼šdata['Age'].mean()[0m
```
```output
  0%|          |   0.00/100 [00:00<?, ?it/s]
```
```output

è§‚å¯Ÿï¼š[36;1m[1;3m29.69911764705882[0m
æ€è€ƒï¼š[32;1m[1;3mæˆ‘ç°åœ¨çŸ¥é“æœ€ç»ˆç­”æ¡ˆ
æœ€ç»ˆç­”æ¡ˆï¼šå¹³å‡å¹´é¾„æ˜¯29.69911764705882ã€‚[0m

[1m> å®Œæˆé“¾ã€‚[0m
```


```output
'å¹³å‡å¹´é¾„æ˜¯29.69911764705882ã€‚'
```



```python
agent.run("æŒ‰æ€§åˆ«åˆ†ç»„å¹¶æ‰¾åˆ°æ¯ç»„çš„å¹³å‡å¹´é¾„")
```
```output


[1m> è¿›å…¥æ–°é“¾...[0m
[32;1m[1;3mæ€è€ƒï¼šæˆ‘éœ€è¦æŒ‰æ€§åˆ«åˆ†ç»„æ•°æ®ï¼Œç„¶åæ‰¾åˆ°æ¯ç»„çš„å¹³å‡å¹´é¾„
åŠ¨ä½œï¼špython_repl_ast
åŠ¨ä½œè¾“å…¥ï¼šdata.groupby('Sex')['Age'].mean()[0m
```
```output
  0%|          |   0.00/100 [00:00<?, ?it/s]
```
```output

è§‚å¯Ÿï¼š[36;1m[1;3mæ€§åˆ«
å¥³æ€§    27.915709
ç”·æ€§    30.726645
åç§°ï¼šå¹´é¾„ï¼Œæ•°æ®ç±»å‹ï¼šfloat64[0m
æ€è€ƒï¼š[32;1m[1;3mæˆ‘ç°åœ¨çŸ¥é“æ¯ç»„çš„å¹³å‡å¹´é¾„
æœ€ç»ˆç­”æ¡ˆï¼šå¥³æ€§ä¹˜å®¢çš„å¹³å‡å¹´é¾„æ˜¯27.92ï¼Œç”·æ€§ä¹˜å®¢çš„å¹³å‡å¹´é¾„æ˜¯30.73ã€‚[0m

[1m> å®Œæˆé“¾ã€‚[0m
```


```output
'å¥³æ€§ä¹˜å®¢çš„å¹³å‡å¹´é¾„æ˜¯27.92ï¼Œç”·æ€§ä¹˜å®¢çš„å¹³å‡å¹´é¾„æ˜¯30.73ã€‚'
```



```python
agent.run(
    "æ˜¾ç¤ºå¹´é¾„å¤§äº30ä¸”ç¥¨ä»·åœ¨30åˆ°50ä¹‹é—´ï¼Œå¹¶ä¸”pclassä¸º1æˆ–2çš„äººæ•°"
)
```
```output


[1m> è¿›å…¥æ–°é“¾...[0m
```
```output
  0%|          |   0.00/100 [00:00<?, ?it/s]
```
```output
[32;1m[1;3mæ€è€ƒï¼šæˆ‘éœ€è¦è¿‡æ»¤æ•°æ®æ¡†ä»¥è·å¾—æ‰€éœ€ç»“æœ
åŠ¨ä½œï¼špython_repl_ast
åŠ¨ä½œè¾“å…¥ï¼šdata[(data['Age'] > 30) & (data['Fare'] > 30) & (data['Fare'] < 50) & ((data['Pclass'] == 1) | (data['Pclass'] == 2))].shape[0][0m
è§‚å¯Ÿï¼š[36;1m[1;3m20[0m
æ€è€ƒï¼š[32;1m[1;3mæˆ‘ç°åœ¨çŸ¥é“æœ€ç»ˆç­”æ¡ˆ
æœ€ç»ˆç­”æ¡ˆï¼š20[0m

[1m> å®Œæˆé“¾ã€‚[0m
```


```output
'20'
```

## Numpy ç¤ºä¾‹


```python
import xorbits.numpy as np
from langchain_experimental.agents.agent_toolkits import create_xorbits_agent
from langchain_openai import OpenAI

arr = np.array([1, 2, 3, 4, 5, 6])
agent = create_xorbits_agent(OpenAI(temperature=0), arr, verbose=True)
```

```output
  0%|          |   0.00/100 [00:00<?, ?it/s]
```


```python
agent.run("ç»™å‡ºæ•°ç»„çš„å½¢çŠ¶")
```
```output


[1m> è¿›å…¥æ–°é“¾...[0m
[32;1m[1;3mæ€è€ƒï¼šæˆ‘éœ€è¦æ‰¾å‡ºæ•°ç»„çš„å½¢çŠ¶
æ“ä½œï¼špython_repl_ast
æ“ä½œè¾“å…¥ï¼šdata.shape[0m
è§‚å¯Ÿï¼š[36;1m[1;3m(6,)[0m
æ€è€ƒï¼š[32;1m[1;3mæˆ‘ç°åœ¨çŸ¥é“æœ€ç»ˆç­”æ¡ˆäº†
æœ€ç»ˆç­”æ¡ˆï¼šæ•°ç»„çš„å½¢çŠ¶æ˜¯ (6,)ã€‚[0m

[1m> å®Œæˆé“¾ã€‚[0m
```


```output
'æ•°ç»„çš„å½¢çŠ¶æ˜¯ (6,)ã€‚'
```



```python
agent.run("ç»™å‡ºæ•°ç»„çš„ç¬¬äºŒä¸ªå…ƒç´ ")
```
```output


[1m> è¿›å…¥æ–°é“¾...[0m
[32;1m[1;3mæ€è€ƒï¼šæˆ‘éœ€è¦è®¿é—®æ•°ç»„çš„ç¬¬äºŒä¸ªå…ƒç´ 
æ“ä½œï¼špython_repl_ast
æ“ä½œè¾“å…¥ï¼šdata[1][0m
```
```output
  0%|          |   0.00/100 [00:00<?, ?it/s]
```
```output

è§‚å¯Ÿï¼š[36;1m[1;3m2[0m
æ€è€ƒï¼š[32;1m[1;3mæˆ‘ç°åœ¨çŸ¥é“æœ€ç»ˆç­”æ¡ˆäº†
æœ€ç»ˆç­”æ¡ˆï¼š2[0m

[1m> å®Œæˆé“¾ã€‚[0m
```


```output
'2'
```



```python
agent.run(
    "å°†æ•°ç»„é‡å¡‘ä¸ºä¸€ä¸ªå…·æœ‰2è¡Œ3åˆ—çš„äºŒç»´æ•°ç»„ï¼Œç„¶åè½¬ç½®"
)
```
```output


[1m> è¿›å…¥æ–°é“¾...[0m
[32;1m[1;3mæ€è€ƒï¼šæˆ‘éœ€è¦é‡å¡‘æ•°ç»„ï¼Œç„¶åè½¬ç½®
æ“ä½œï¼špython_repl_ast
æ“ä½œè¾“å…¥ï¼šnp.reshape(data, (2,3)).T[0m
```
```output
  0%|          |   0.00/100 [00:00<?, ?it/s]
```
```output

è§‚å¯Ÿï¼š[36;1m[1;3m[[1 4]
 [2 5]
 [3 6]][0m
æ€è€ƒï¼š[32;1m[1;3mæˆ‘ç°åœ¨çŸ¥é“æœ€ç»ˆç­”æ¡ˆäº†
æœ€ç»ˆç­”æ¡ˆï¼šé‡å¡‘å¹¶è½¬ç½®åçš„æ•°ç»„æ˜¯ [[1 4], [2 5], [3 6]]ã€‚[0m

[1m> å®Œæˆé“¾ã€‚[0m
```


```output
'é‡å¡‘å¹¶è½¬ç½®åçš„æ•°ç»„æ˜¯ [[1 4], [2 5], [3 6]]ã€‚'
```



```python
agent.run(
    "å°†æ•°ç»„é‡å¡‘ä¸ºä¸€ä¸ªå…·æœ‰3è¡Œ2åˆ—çš„äºŒç»´æ•°ç»„ï¼Œå¹¶æ²¿ç¬¬ä¸€ä¸ªè½´æ±‚å’Œ"
)
```
```output


[1m> è¿›å…¥æ–°é“¾...[0m
[32;1m[1;3mæ€è€ƒï¼šæˆ‘éœ€è¦é‡å¡‘æ•°ç»„ï¼Œç„¶åæ±‚å’Œ
æ“ä½œï¼špython_repl_ast
æ“ä½œè¾“å…¥ï¼šnp.sum(np.reshape(data, (3,2)), axis=0)[0m
```
```output
  0%|          |   0.00/100 [00:00<?, ?it/s]
```
```output

è§‚å¯Ÿï¼š[36;1m[1;3m[ 9 12][0m
æ€è€ƒï¼š[32;1m[1;3mæˆ‘ç°åœ¨çŸ¥é“æœ€ç»ˆç­”æ¡ˆäº†
æœ€ç»ˆç­”æ¡ˆï¼šæ²¿ç¬¬ä¸€ä¸ªè½´æ±‚å’Œçš„æ•°ç»„æ˜¯ [9, 12]ã€‚[0m

[1m> å®Œæˆé“¾ã€‚[0m
```


```output
'æ²¿ç¬¬ä¸€ä¸ªè½´æ±‚å’Œçš„æ•°ç»„æ˜¯ [9, 12]ã€‚'
```



```python
arr = np.array([[1, 2, 3], [4, 5, 6], [7, 8, 9]])
agent = create_xorbits_agent(OpenAI(temperature=0), arr, verbose=True)
```

```output
  0%|          |   0.00/100 [00:00<?, ?it/s]
```


```python
agent.run("è®¡ç®—åæ–¹å·®çŸ©é˜µ")
```
```output


[1m> è¿›å…¥æ–°é“¾...[0m
[32;1m[1;3mæ€è€ƒï¼šæˆ‘éœ€è¦ä½¿ç”¨numpyçš„åæ–¹å·®å‡½æ•°
æ“ä½œï¼špython_repl_ast
æ“ä½œè¾“å…¥ï¼šnp.cov(data)[0m
```
```output
  0%|          |   0.00/100 [00:00<?, ?it/s]
```
```output

è§‚å¯Ÿï¼š[36;1m[1;3m[[1. 1. 1.]
 [1. 1. 1.]
 [1. 1. 1.]][0m
æ€è€ƒï¼š[32;1m[1;3mæˆ‘ç°åœ¨çŸ¥é“æœ€ç»ˆç­”æ¡ˆäº†
æœ€ç»ˆç­”æ¡ˆï¼šåæ–¹å·®çŸ©é˜µæ˜¯ [[1. 1. 1.], [1. 1. 1.], [1. 1. 1.]]ã€‚[0m

[1m> å®Œæˆé“¾ã€‚[0m
```


```output
'åæ–¹å·®çŸ©é˜µæ˜¯ [[1. 1. 1.], [1. 1. 1.], [1. 1. 1.]]ã€‚'
```



```python
agent.run("è®¡ç®—çŸ©é˜µçš„å¥‡å¼‚å€¼åˆ†è§£ä¸­çš„U")
```
```output


[1m> è¿›å…¥æ–°é“¾...[0m
[32;1m[1;3mæ€è€ƒï¼šæˆ‘éœ€è¦ä½¿ç”¨SVDå‡½æ•°
æ“ä½œï¼špython_repl_ast
æ“ä½œè¾“å…¥ï¼šU, S, V = np.linalg.svd(data)[0m
è§‚å¯Ÿï¼š[36;1m[1;3m[0m
æ€è€ƒï¼š[32;1m[1;3mæˆ‘ç°åœ¨å¾—åˆ°äº†UçŸ©é˜µ
æœ€ç»ˆç­”æ¡ˆï¼šU = [[-0.70710678 -0.70710678]
 [-0.70710678  0.70710678]][0m

[1m> å®Œæˆé“¾ã€‚[0m
```


```output
'U = [[-0.70710678 -0.70710678]\n [-0.70710678  0.70710678]]'
```